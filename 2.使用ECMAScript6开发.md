# 2. 使用ECMAScript6开发 

这一章介绍在当前的JavaScript环境下开发ECMAScript 6你需要的操作。以下涵盖的都是备选的相关工具。如果你想要一个综合的工具清单，我建议你去Addy Osmani的“[ECMAScript 6 Tools](https://github.com/addyosmani/es6-tools)”看看。 

## 2.1 现在使用ECMAScript 6 

在现在使用ECMAScript你有什么样的选择？ 

- 当前的JavaScript引擎（浏览器，Node.js，...）已经支持大部分的ES6。你可以通过以下方式来查看已支持哪些特性： 
- Kangax的“[ECMAScript 6 compatibility table](http://kangax.github.io/compat-table/es6/)”。 
- William Kapke的“[Node.js ES2015 Support](http://node.green/)”列出了在Kangax的表格中仅与Node相关的部分。 
- ES6 REPLs（交互式命令行）可以让你测试出小部分的代码。在[本章中的一个部分](https://brickcarvingartist.github.io/Setting-up-ES6/2.%E4%BD%BF%E7%94%A8ECMAScript6%E5%BC%80%E5%8F%91#2.2)列出了可用的选项。 
- 把ES6编译成ES5：特别声明，如果你需要考虑对历史遗留的引擎作支持，在相当长的一段时间里，将ES6编译成ES5是唯一可选操作。将源码编译成源码也可以称之为源码翻译。你可以在部署环境（静态地）和运行时（动态地）用源码翻译的方式来使用ES6。这一章会阐述如何让它运转，以及其他的既有ES6工具和库。 

ES6是ES5的超集是一个可喜点，这意味着你所有的基于ES5的代码都是在ES6中生效的。因为你可以逐渐的去使用它，这也帮助你更快接受专属ES6的特性。 

## <span id="2.2">2.2 ES6 REPLs</span> 

市面上有很多REPLs（命令行）用来交互地与ES6互动。以下项目提供丰富的选择为在线编码提供互动的玩乐场所： 

- [TypeScript Playground](http://www.typescriptlang.org/Playground) 
- [Babel REPL](https://babeljs.io/repl/) 
- [Traceur Transcoding Demo](http://google.github.io/traceur-compiler/demo/repl.html) 
- [Closure Compiler Service](https://closure-compiler.appspot.com/) 

另外，Babel通过它的[babel-node工具](https://leanpub.com/setting-up-es6/read#sec_babel-node)将对ES6特性的支持带到Node.js。 

## 2.3 源码翻译工具 

有三个必要的选择你需要为代码翻译工具准备： 

- 一个代码翻译器（为你的代码服务） 
- 一个包管理工具（用来安装已有的库） 
- 一个模块系统 （为了完整的应用） 

需要注意的是这些选择都不全是独立存在的；不是每一个模块系统都可以和每一个其它包管理工具一起运作。下一章详细介绍这些选择中的每一项。 

### 2.3.1 选择一个翻译器 

一个翻译器能将ES6的代码翻译成ES5。有名的选择有： 

- [Microsoft TypeScript](http://www.typescriptlang.org/)：是一个基础的ECMAScript6+可配置的类型注解。 
- [Google Traceur](https://github.com/google/traceur-compiler)：是最具人气的ES6翻译器。是法语发音，/tʁa.sœʁ/；用英语的话接近地发音成“truh-SIR” （[来源](https://github.com/google/traceur-compiler/issues/1875), [听法语母语的人对这个单词的发音](http://www.forvo.com/word/traceur/)）。
- [Babel](https://babeljs.io/)：是一个更新的，事实上即将成为标准的ES6翻译器。Babel除了支持ES6以外，还支持React的JSX语法。发音为“babble”（想象一下澳大利亚的重音 - Babel的创造者，澳大利亚的Sebastian McKenzie）。 
- [Closure Compiler](https://developers.google.com/closure/compiler/)：如果你用接下来的两个命令行选项，就能够当作例如ECMAScript6至ECMAScript5的静态翻译： 
 - 指定输入语言：`--language ECMASCRIPT6_STRICT` 
 - 指定输出语言：`--language_out ECMASCRIPT5` 

原则上，翻译器以下面任意一种方式完成翻译： 

- 静态地（部署环境之前）或者 
- 动态地（在运行时）

### 2.3.3.1 静态翻译 

作为一个构建步骤，TypeScript，Traceur，Babel和Closure Compiler让你在以下格式化模块中提供ES5代码。你可以任意直接得调用他们或者用一个构建工具（grunt，gulp，broccoli，或其它）。 

- AMD 
- CommonJS 
- ES6 module loader API：使用这个API会通过polyfill把ES6代码翻译成ES5。